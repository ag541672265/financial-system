define(["jquery","base","trial-render","my-calendar","message","layer","jquery-prompt"],function($,e,t,C,i,s){"use strict";function a(e){var t=e||{};for(var a in t)this[a]=t[a];this.message=new i,this.init()}function n(){}n.prototype={listStyle:"trial-list",itemStyle:"trial-item",activeStyle:"filter-active-tag",eventInit:function(){var e=this;e.eventEnterValue(),e.eventSelect(),e.eventPlugin(),e.eventCalendar(),$(".insurant-date-limit-select").change(function(){$(this).parents(".hz-dropdown-content").find(".error-text").hide().find("span").text("")}),$("body").on("click","#lookInterestsDemon",function(){e.showInterestsDemon()})},calendar:[],insurantDateStart:{max:"",min:""},insurantDateEnd:{max:"",min:""},eventCalendar:function(){var I=this;I.genesArea.find(".trial-calendar").each(function(e){$(this).data("maxdate"),$(this).data("mindate");var t=$(this).data("max")||0,a=$(this).data("min")||0,i=$(this).data("unit")||0,n=$(this).data("list")||"[]",l=$(this).data("key");if(!$(this).data("lock")){$(this).data("lock",!0);var d=new Date,s=(new Date,new Date,d.getFullYear(),d.getDate(),0),r=0,o=0,u=0,c=0,p=0,f=0,h=I.getCurrentTime(new Date);if("insurantDate"!==l&&"vesterAge"!==l||!I.defaultInsureTime||(h=I.defaultInsureTime),"岁"===I.getUnit(i)||"周岁"===I.getUnit(i)?(r=a,o=t,s=1):"天"===I.getUnit(i)&&(u=a,c=t),t+I.getUnit(i),a+I.getUnit(i),n.subrestrict&&"天"===I.getUnit(n.subrestrict.unit)){var m=n.subrestrict.max,v=n.subrestrict.min;m&&(p=m),v&&(f=v)}var g=I.createDate({newDate:h,year:-r,date:-u+p}),y=I.createDate({newDate:h,year:-o-s,date:-c+f});I.calendar[e]=new C({el:this,maxDate:g,minDate:y,zIndex:1020,callback:function(e,t){"date"===t.type&&I.postChange()}}),$(I.calendar[e].box).addClass("date-box-"+e)}}),I.travel={start:{max:"",min:""},end:{max:"",min:""}},I.genesArea.find(".trial-insurant-date-limit").each(function(){$(this).data("lock")||($(this).data("lock",!0),new C({el:this,zIndex:55555,minDate:function(){var e=$(this.el).data("type"),t="",a=$('[data-type="start"]').val(),i=I.createDate({date:1});return"start"===e?t=i:"end"===e&&(t=a||i),t},maxDate:function(){var e=$(this.el).data("type"),t="",a=$('[data-type="end"]').val();return"start"===e&&(t=a||""),t},callback:function(e,t){var a=$(this.el).parents(".hz-dropdown-content"),i=a.find('[data-type="start"]').val(),n=a.find('[data-type="end"]').val(),l=a.find("[data-tips]"),d=a.find("[data-date]"),s=a.find("select"),r=I.dateDifference(i,n),o=!1,u=0;if("date"===t.type&&i&&n)if(0<=r)if(l.hide().find("span").html(""),0===r?r=1:r++,o=r%365==0,u=r/365,d.html("<strong>"+r+"天</strong>"),I.__findSelectValue(s,r+"天"))s.val(r+"天"),I.__selectTimeStatus=!0;else if(I.__findSelectValue(s,u+"年")&&o)s.val(u+"年"),I.__selectTimeStatus=!0;else{var c=I.__findRangeSelectValue(s,r,"天");c?(s.val(c+"天"),I.__selectTimeStatus=!0):(c=I.__findRangeSelectValue(s,r,"年"))&&o?(s.val(c+"年"),I.__selectTimeStatus=!0):(l.show().find("span").html(I.TEXT_DATE_INVALID),I.__selectTimeStatus=!1)}else d.html(""),l.show().find("span").html(I.TEXT_DATE_ERROR),I.__selectTimeStatus=!1}}))}),I.genesArea.find(".hz-check-item").off("click").on("click",function(){var e=$(this).nextAll(".calendar-box-wrap");$(this).toggleClass("hz-check-item-checked"),C.closeAll(),$(this).hasClass("hz-check-item-checked")?e.removeClass("fn-hide"):e.addClass("fn-hide")})},__selectTimeStatus:!(a.prototype={ready:function(){},change:function(){},render:function(){this.genesArea.html(this.renderGenes()),this.protectArea.html(this.renderProtect())},init:function(){"true"===this.getQueryValue("dev")&&(this.info("调试模式开启：前端渲染页面"),this.setData(),this.render()),this.setDefaultValue(),this.ready(),this.change(),this.mergeIdenticalProtectItem(),this.resetSelfInsureInsurantDate()},productId:"",productPlanId:"",baseProductId:"",baseProductPlanId:"",platform:1,channel:1,defaultInsureTime:"",loadProtectDesc:!0,messageTimeOut:2e3,eventInit:function(){},getGenes:function(){var o=this,u=[];return o.genesArea.find(".trial-list").each(function(e,t){var a,i=$(this).find("."+o.itemStyle),n=$(this).find("."+o.activeStyle+",input.trial-item,.product-amount-input,.hz-dropdown[disabled]"),l=n.data("protectitemid"),d=n.data("key"),s=n.data("default-value")!==undefined?n.data("default-value"):n.val()||"",r=$(t).find(".hz-dropdown[address]");if(r.length)r.each(function(e,t){a={protectItemId:"",key:$(t).attr("address"),value:String($(t).data("default-value"))},u.push(a)});else{if(!(l||d||(l=i.data("protectitemid"),d=i.data("key"),l||d)))return;a={protectItemId:String(l),key:d,value:String(s)},u.push(a)}}),u},getProductInfo:function(e){var t=e||{};return this.extend({planId:this.productPlanId,productId:this.productId,baseProductId:this.baseProductId,basePlanId:this.baseProductPlanId,platform:this.platform,channel:this.channel,insureDateTime:this.defaultInsureTime||""},t)},getData:function(){},getGenesData:function(){var i=[];return this.genesArea.find(".trial-list").each(function(e,t){var a=$(t).find(".trial-item");i.push({key:a.data("key")||"",protectItemId:a.data("protectItemId")||"",data:a.data("list"),$el:$(t),controlType:a.attr("controltype")})}),i},getGeneDom:function(e){return $(".ensure-opt-content[data-key="+e+"]")},getGene:function(t){return _.find(this.getGenes(),function(e){return e.key===t||e.protectItemId===t})},resetSelfInsureInsurantDate:function(){var e=this.getGene("vesterAge"),t=this.getGene("insureForSelf"),a=this.getGene("insurantDate");if(t&&e&&a){var i=e.value,n=this.getGeneDom("insurantDate"),l=n.find(".trial-item"),d=this.getGeneDom("sex"),s=l.attr("value");if("否"===t.value)return d.find(".trial-item").removeClass("disabled").siblings(".filter-active-tag").removeClass("unr-disabled"),l.removeClass("disabled").attr("readonly",!1),void this.setMyCalendarStatus(n,1);l.addClass("disabled").attr("readonly",!0),d.find(".trial-item").addClass("disabled").siblings(".filter-active-tag").addClass("unr-disabled"),this.setMyCalendarStatus(n,0),e.value!==a.value&&(this.optGeneOldValue.key="insurantDate",this.optGeneOldValue.value=s,l.attr("value",i).val(i),this.postChange())}},setMyCalendarStatus:function(e,t){if(e&&0!==e.length){t=t===undefined?1:t;var a=$(".trial-calendar").index(e.find(".trial-calendar"));$("body")[t?"removeClass":"addClass"]("disabled-calendar-"+a)}}}),__findSelectValue:function(e,t){var a=!1;return e.find("option").each(function(){$(this).attr("value")===t&&(a=!0)}),a},__findRangeSelectValue:function(e,n,l){var d="";return e.find("option").each(function(){var e=$(this).attr("value").split(l)[0],t=e.split("-"),a=t[0],i=t[0];1<t.length&&(a=t[1]),i<=n&&n<=a&&(d=e)}),d},eventEnterValue:function(){var e=this;e.el.find(".only-number").blur(function(){e.validateInput(this)||$(this).val("")}),e.el.find(".only-number").enterOnlyNumber(),e.el.find(".product-amount-wrap").eidtNumber({})},setOldValue:function(e,t){var a=this,i=e.data("protectitemid"),n=e.data("key"),l=t||e.data("default-value");a.optGeneOldValue={},i&&(a.optGeneOldValue.protectItemId=i),n&&(a.optGeneOldValue.key=n),a.optGeneOldValue.value=a.replaceNull(l)},validateInput:function(e){var t=$(e),a=t.val(),i=t.data("max"),n=t.data("min"),l=t.data("step"),d=!1;return $.isNumeric(a)?(i&&(d=!(i<a)||(t.val(""),!1)),n&&(d=!(a<n)||(t.val(""),!1)),d=(a-n)%l==0):t.val(""),d},getOldValue:function(e){var t=this,a=$(e),i=$(e).parents(".trial-list"),n=i.find("."+t.activeStyle).length?i.find("."+t.activeStyle):i.find("span."+t.itemStyle),l=n.data("protectitemid"),d=n.data("key");t.optGeneOldValue={},l||d||(l=a.data("protectItemid")||"",d=a.data("key")||""),l&&(t.optGeneOldValue.protectItemId=l),d&&(t.optGeneOldValue.key=d),t.optGeneOldValue.value=n.data("default-value")||n.text()||a.val(),t.info(t.optGeneOldValue)},setSelectValue:function(a,i){var n=!1;if(i)return a.find(".hz-dropdown-menu >li").each(function(){var e=$(this).data("default-value"),t=a.find("input");i===e&&(a.find("li").removeClass("hz-select-option-selected"),t.val(i),$(this).addClass("hz-select-option-selected"),n=!0)}),n&&(a.parent().find("."+this.itemStyle).removeClass(this.activeStyle),a.data("default-value",i).addClass(this.activeStyle)),n},setDefaultValue:function(){},forAdjust:function(){},insureForSelfUpdate:function(){},eventSelect:function(){var c=this;c.genesArea.on("click","[address]",function(e){($(e.target).hasClass("input-select-text")||$(e.target).hasClass("iconfont"))&&(c.optGeneOldValue={},c.optGeneOldValue.protectItemId="",c.optGeneOldValue.key=String($(this).attr("address")),c.optGeneOldValue.value=String($(this).data("default-value")))}).on("change","."+c.itemStyle,function(){var e=$(this).val();$(this).parent().find("."+c.activeStyle).removeClass(c.activeStyle),$(this).parent().find('[data-default-value="'+e+'"]').addClass(c.activeStyle),$(this).hasClass("trial-calendar")||c.postChange()}).on("focus","."+c.itemStyle,function(e){$(this).is("input")&&c.getOldValue(e.target)}).on("click","."+c.itemStyle,function(e){var t,a,i=$(this).parents("."+c.listStyle),n=i.find("."+c.activeStyle),l=n.data("protectitemid")||"",d=n.data("key")||"",s=n.data("default-value")||"",r=$(this).data("unit")||"",o="",u=$(this).attr("controltype");$(this).hasClass("disabled")||$(this).is("li")||$(this).hasClass("filter-tag-text")||($(this).is("input")?"click"===e.type&&c.getOldValue(e.target):(c.optGeneOldValue={},l&&(c.optGeneOldValue.protectItemId=l),d&&(c.optGeneOldValue.key=d),l||d||(l=$(this).data("protectitemid"),d=$(this).data("key"),l&&(c.optGeneOldValue.protectItemId=l),d&&(c.optGeneOldValue.key=d)),c.optGeneOldValue.value=s,i.find("."+c.itemStyle+",.hz-dropdown").removeClass(c.activeStyle),i.find(".hz-dropdown .input-select-text").text(c.TEXT_SELECT_MORE),i.find(".hz-dropdown").find("li.hz-select-option").removeClass("hz-select-option-selected"),i.find(".hz-dropdown").data("default-value"),a=$(this).data("default-value"),$(this).hasClass("filter-tag")&&($(this).addClass(c.activeStyle),i.find(".input-select>.trial-item,input.product-amount-input").val(i.find("."+c.activeStyle).data("default-value")),i.find("input.product-amount-input").trigger("reset"),c.postChange()),t=c.protectArea.find('.hz-dropdown[data-protectitemid="'+(l||"test")+'"],.hz-dropdown[data-key="'+(d||"test")+'"]'),3===c.toInt(u)&&(o=r),(l||d)&&(t.data("default-value",a).addClass(c.activeStyle).find(".input-select-text").text(a+o),t.find("li").removeClass("hz-select-option-selected"),t.find('li[data-value="'+a+'"],li[data-default-value="'+a+'"]').addClass("hz-select-option-selected"))))})},eventPlugin:function(){var a=this;a.el.find(".trial-calendar").click(function(){var e=$(this).data("key"),t=$(this).data("protectitemid");a.optGeneOldValue={},e&&(a.optGeneOldValue.key=e),t&&(a.optGeneOldValue.protectItemId=t),a.optGeneOldValue.value=$(this).val()}),a.el.find(".hz-dropdown").dropDown({type:1,event:function(e){return!$(e.target).hasClass("iconfont")&&!$(e.target).hasClass("more-tag")},select:function(e){return a.dropDownCallback1(this,e)}}),a.bindPrompt()},__getItemOldValue:function(e){var t=this,a=$(e),i=a.find("."+t.activeStyle).eq(0),n=a.find("."+t.itemStyle+",.hz-dropdown").data("key"),l=a.data("protectitemid"),d=i.data("default-value")||"";t.optGeneOldValue={},n&&(t.optGeneOldValue.key=n),l&&(t.optGeneOldValue.protectItemId=l),t.optGeneOldValue.value=d,t.info(t.optGeneOldValue)},dropDownCallback1:function(e,t){function a(){f.find("."+r.itemStyle+",.hz-dropdown").removeClass(r.activeStyle),c.addClass(r.activeStyle)}function i(e,t){var a=t||"请输入合法内容";e||""?m.hide().find("span").text(""):m.show().find("span").text(a)}var n,l,d,s,r=this,o=!1,u=$(t.target),c=$(e),p=c.find(".input-select-text"),f=(c.find(".hz-select-option"),c.parents("."+r.listStyle)),h=c.find(".input-enter"),m=c.find(".error-text"),v=c.find('[data-type="start"]'),g=c.find('[data-type="end"]'),y=c.find(".hz-check-item"),I=c.data("protectitemid"),C=c.data("key"),S=I||C,V=r.toInt(u.attr("controltype")),O=!!c.attr("address"),G="true"===c.attr("protect"),k=u.hasClass(r.itemStyle),w=u.data("value")||u.data("default-value"),x="time"===u.attr("edit"),z="ok"===u.attr("edit"),T="cancel"===u.attr("edit");if(k){if(p.text(u.text()),O){var D=c.data("key"),_=c.data("protectitemid"),b=c.data("default-value");r.optGeneOldValue={},D&&(r.optGeneOldValue.key=D),_&&(r.optGeneOldValue.protectItemId=_),r.optGeneOldValue.value=b,r.info(r.optGeneOldValue),r.postChange()}else{var P=r.protectArea.find('.hz-dropdown[data-protectitemid="'+S+'"],.hz-dropdown[data-key="'+S+'"]'),A=P.find('.hz-select-option[data-protectitemid="'+S+'"][data-value="'+w+'"],.hz-select-option[data-key="'+S+'"][data-value="'+w+'"]');if(G){var E=(L=r.genesArea.find('[data-protectitemid="'+(S||"test")+'"],[data-key="'+(S||"test")+'"]')).find(".hz-dropdown");3===V&&(w=parseInt(w,10)),L.find(".trial-item,.hz-dropdown").removeClass(r.activeStyle),L.find(".hz-dropdown").attr("data-default-value","").data("default-value","");var R=L.find('[data-default-value="'+w+'"]');R.addClass(r.activeStyle),R.length||(E.addClass(r.activeStyle).find(".input-select-text").text(w),E.data("default-value",w),E.find(".hz-select-option").removeClass("hz-select-option-selected"),E.find('.hz-select-option[data-value="'+w+'"]').addClass("hz-select-option-selected")),n=c.data("key"),l=c.data("protectitemid"),d=c.data("default-value"),r.optGeneOldValue={},n&&(r.optGeneOldValue.key=n),l&&(r.optGeneOldValue.protectItemId=l),r.optGeneOldValue.value=d,r.info(r.optGeneOldValue),0===V&&(P.addClass(r.activeStyle),P.find("li").removeClass("hz-select-option-selected"),A.addClass("hz-select-option-selected"),P.find(".input-select-text").text(A.eq(0).text()),P.data("default-value",A.data("value"))),r.logRed("保障项下拉")}else P.addClass(r.activeStyle),P.find("li").removeClass("hz-select-option-selected"),A.addClass("hz-select-option-selected"),P.find(".input-select-text").text(A.eq(0).text()),P.data("default-value",A.data("value")),r.__getItemOldValue(f),3===V&&(w=parseInt(w,10)),u.parents(".hz-dropdown").attr("data-default-value",w),r.logGreen("试算因子下拉");r.postChange(),a()}o=!0,s=w||"",c.data("default-value",s),c.find("li").removeClass("hz-select-option-selected"),u.addClass("hz-select-option-selected")}else if(x){if(o=!1,i(N=c.find("select").val()),y.hasClass("hz-check-item-checked")&&(!v.val()||!g.val()))return void i("",r.TEXT_DATE_INVALID);if(N===r.TEXT_SELECT_MORE)return o=!1,void i();r.__getItemOldValue(f),a(),p.text(N),c.data("default-value",N),o=!0,r.postChange()}else if(z){var N=h.val(),U="",X=c.find('.hz-select-option[data-value="'+N+'"]'),q=u.data("unit");if(o=!1,r.__getItemOldValue(f),i(N),!N)return o=!1;if(X.length)X.click();else{if(3!==V&&(U=N),a(),p.text(N+(c.data("unit")||r.getUnit(h.data("unit"))||"")),c.data("default-value",N),G){n=c.data("key"),l=c.data("protectitemid"),d=c.data("default-value"),n&&(r.optGeneOldValue.key=n),l&&(r.optGeneOldValue.protectItemId=l),r.optGeneOldValue.value=d,r.info(r.optGeneOldValue);var L,j=(L=$('dd[data-protectitemid="'+S+'"]')).find('[data-protectitemid="'+S+'"][data-default-value="'+N+'"]');L.find("."+r.itemStyle+",.hz-dropdown").removeClass(r.activeStyle),j.length?j.addClass(r.activeStyle):L.find(".hz-dropdown").data("defaultValue",N).addClass(r.activeStyle).find(".input-select-text").text(N+q),c.find(".hz-select-option").removeClass("hz-select-option-selected"),c.find('.hz-select-option[data-default-value="'+U+'"]').addClass("hz-select-option-selected"),p.text(U+r.getUnit(h.data("unit")))}else{var M=r.protectArea.find('.hz-dropdown[protect="true"][data-protectitemid="'+S+'"]');M.data("default-value",N),M.find(".input-select-text").text(N+q),M.addClass(r.activeStyle),M.find(".hz-select-option").removeClass("hz-select-option-selected"),M.find('.hz-select-option[data-default-value="'+U+'"],.hz-select-option[data-default-value="'+U+q+'"]').addClass("hz-select-option-selected")}r.postChange(),o=!0}}return T&&(o=!0),o},optGeneOldValue:{key:"",protectItemId:"",value:""},postDelayTime:300,__postTimer:null,postChange:function(){var e=this;e.postDelayTime?(clearTimeout(e.__postTimer),e.__postTimer=setTimeout(function(){e.postChangeData()},e.postDelayTime)):e.postChangeData()},bindPrompt:function(){$(".trial-prompt").prompt({position:"top"})},getGenesString:function(e){var t=this,a=t.getProductInfo({genes:t.getGenes()||[],optGeneOldValue:t.optGeneOldValue});return"cashValue"===e&&(a.productPlanId=a.planId,a.premium=t.trialPrice&&t.trialPrice.vipPrice?t.trialPrice.vipPrice:0<$(".preminum-result").length&&$(".preminum-result:eq(0)").text()?100*$(".preminum-result:eq(0)").text():0),a=window.JSON2?JSON2.stringify(a):JSON.stringify(a),t.info(a),t.trialString=a},trialString:"",postChangeData:function(e,l){s.closeAll();var d=this;d.logRed((d.optGeneOldValue.key||d.optGeneOldValue.protectItemId)+" 的旧值："+d.optGeneOldValue.value),d.message.show(d.TEXT_UPDATING,"loading"),d.insureForSelfUpdate(),$.post("/api/products/"+d.productId+"/restrict-rule",{data:e||d.getGenesString(),time:d.getTime()},function(e){if(d.message.hide(),d.updateRender(e.result),d.resetSelfInsureInsurantDate(),"function"==typeof l&&l(e),e&&e.result&&e.result){if(e.result.notice){var t=$('[data-protectitemid="'+e.result.notice+'"],[data-key="'+e.result.notice+'"]').find("."+d.activeStyle),a=t.data("default-value");t.removeClass(d.activeStyle),a&&(d.optGeneOldValue={},"string"==typeof a?d.optGeneOldValue.key=e.result.notice:d.optGeneOldValue.protectItemId=e.result.notice,d.optGeneOldValue.value=a),setTimeout(function(){d.postChangeData()},d.messageTimeOut)}var i=e.result.trialPrice||{};if(i.highPreminumNotice&&s.msg(i.highPreminumNotice),-1<[].indexOf(Number(d.productId))){var n=2e7<=i.totalPreminum||2e7<=parseInt($('.filter-active-tag[data-key="insureAgeLimit"]').text())*i.singlePrice;if(n?$("a[insuredstart]").addClass("HZJTBZXQ-993"):$("a[insuredstart]").removeClass("HZJTBZXQ-993"),n)return void s.msg("单笔总保费如超20万，将无法正常投保。建议拆单或降低保额，详情可联系您的保险咨询顾问。")}e.result.noticeMsg&&(e.result.restrictResult&&e.result.restrictResult.status&&"36058"===e.result.restrictResult.status?s.msg("单笔保费如超过20万，将无法正常投保，详情请联系保险咨询顾问"):s.msg(e.result.noticeMsg))}else"00000"!==e.status&&d.message.show(e.message,"warning",d.messageTimeOut)})},updateProtect:function(e){var d=this,t=e||{},a=t.protectTrialItemList||[],s=t.restrictGenes||[];a.forEach(function(t,e){var a=t.description||"",i=$('[id="protect-'+t.protectItemId+"-"+t.trialItemId+'"]'),n="",l=[];s.forEach(function(e){d.toInt(t.relateCoverageId)!==d.toInt(e.protectItemId)&&d.toInt(t.relateCoverageId)!==d.toInt(e.key)||(n=e)}),l.push('<li class="ensure-protect-item '+d.listStyle+'" id="protect-'+t.protectItemId+"-"+t.trialItemId+'" protectname="'+t.name+'" trialItemId="'+t.trialItemId+'">'),l.push('<div class="row01"><div class="protect-item-icon">'+(t.icon?'<img src="'+t.icon+'" width="24" height="24" alt="图标" title="'+t.name+'"/>':'<i class="iconfont icon-item f24">&#xe702;</i>')+"</div></div>"),l.push('<div class="row02"><div class="protect-item-name">'+t.name+"</div></div>"),l.push('<div class="row03">'),t.relateCoverageId?(3!==n.controlType||n.dictionaryList||d.genesArea.find('[data-protectitemid="'+n.protectItemId+'"]').removeClass("filter-active-tag"),l.push(d.renderForm({item:t,formObject:n,isProtect:!0}))):l.push((t.fullPremium?t.fullPremium:t.premium)||""),l.push(t.showUnit),l.push("</div>"),l.push('<div class="row04"><div class="protect-item-des f12 fc6">'+a+"</div></div>"),l.push("</li>"),i.after(l.join("")),i.remove()})},updateRender:function(e){var d=this,t=e.restrictGenes||[];d.preminum=e.preminum||d.notInsureText,d.trialPrice=e.trialPrice||{},d.change(),d.setPrice(),d.info(e),d.updateProtect(e),$(".golden-span").text(d.trialPrice.goldenBean),t.forEach(function(e){var t,a=e.protectItemId||e.key,i="101593"==d.productId?e.display?"":" hidden":"",n=d.renderForm({formObject:e,disabled:e.disabled}),l=d.renderGenesRow({boxClass:i,name:e.name,item:e,id:e.protectItemId||e.key,content:n});t=$("#list-item-"+d.productPlanId+"-"+a),!1===e.enabled&&"area"===e.key?t.find(".trial-item,.hz-dropdown").addClass("disabled"):(t.after(l),t.remove()),d.setDefaultValue(),d.eventEnterValue(),d.eventPlugin(),d.eventCalendar(),d.mergeIdenticalProtectItem()})},mergeIdenticalProtectItem:function(){var t=this;t.protectArea.find("[protectname]").each(function(){var e=$(this).attr("protectname");t.protectArea.find('[protectname="'+e+'"]').each(function(e){var t="";t=e?"hidden":"",$(this).find(".row01,.row02").css({visibility:t})})})},showInterestsDemon:function(){$.post("/api/products/get-cash-value",{data:this.getGenesString("cashValue"),time:this.getTime()},function(n){"00000"===n.status?require(["require-text!/html/product/interests-demon.html"],function(e){s.open({type:1,area:["860px","500px"],shift:2,title:"查看现金价值演示",content:_.template(e)({list:n.result||[]})});var t=$(".js-interests-demon"),a=t.width(),i=t.find(".demon-hd span").length;t.find(".row span").width((a-20)/i)}):s.msg(n.message||"获取利益演示失败，请重试")})}};function l(){}return l.prototype={TEXT_DATE_INVALID:"您选择的日期无效，请重新选择！",TEXT_DATE_ERROR:"出发日期不能晚于结束日期",TEXT_UPDATING:"正在更新..."},e.extend(a.prototype,new e),e.extend(a.prototype,new t),e.extend(a.prototype,new n),e.extend(a.prototype,new l),a});