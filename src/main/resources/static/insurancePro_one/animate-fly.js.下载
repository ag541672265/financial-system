"use strict";define(["jquery"],function($){!function(){for(var a=0,t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var n=(new Date).getTime(),i=Math.max(0,16-(n-a)),o=window.setTimeout(function(){t(n+i)},i);return a=n+i,o}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),$.fly=function(t,e){var l={version:"1.0.0",autoPlay:!0,vertex_Rtop:20,speed:1.2,start:{},end:{},onEnd:$.noop},n=this,u=$(t);n.init=function(t){this.setOptions(t),this.settings.autoPlay&&this.play()},n.setOptions=function(t){this.settings=$.extend(!0,{},l,t);var e=this.settings,n=e.start,i=e.end;u.css({marginTop:"0px",marginLeft:"0px",position:"fixed"}).appendTo("body"),null!=i.width&&null!=i.height&&$.extend(!0,n,{width:u.width(),height:u.height()});var o=Math.min(n.top,i.top)-Math.abs(n.left-i.left)/3;o<e.vertex_Rtop&&(o=Math.min(e.vertex_Rtop,Math.min(n.top,i.top)));var a=Math.sqrt(Math.pow(n.top-i.top,2)+Math.pow(n.left-i.left,2)),h=Math.ceil(Math.min(Math.max(Math.log(a)/.05-75,30),100)/e.speed),s=n.top==o?0:-Math.sqrt((i.top-o)/(n.top-o)),r=(s*n.left-i.left)/(s-1),p=i.left==r?0:(i.top-o)/Math.pow(i.left-r,2);$.extend(!0,e,{count:-1,steps:h,vertex_left:r,vertex_top:o,curvature:p})},n.play=function(){this.move()},n.move=function(){var t=this.settings,e=t.start,n=t.count,i=t.steps,o=t.end,a=e.left+(o.left-e.left)*n/i,h=0==t.curvature?e.top+(o.top-e.top)*n/i:t.curvature*Math.pow(a-t.vertex_left,2)+t.vertex_top;if(null!=o.width&&null!=o.height){var s=i/2,r=o.width-(o.width-e.width)*Math.cos(n<s?0:(n-s)/(i-s)*Math.PI/2),p=o.height-(o.height-e.height)*Math.cos(n<s?0:(n-s)/(i-s)*Math.PI/2);u.css({width:r+"px",height:p+"px","font-size":Math.min(r,p)+"px"})}u.css({left:a+"px",top:h+"px"}),t.count++;var l=window.requestAnimationFrame($.proxy(this.move,this));n==i&&(window.cancelAnimationFrame(l),t.onEnd.apply(this))},n.destroy=function(){u.remove()},n.init(e)},$.fn.fly=function(t){return this.each(function(){undefined==$(this).data("fly")&&$(this).data("fly",new $.fly(this,t))})}});