define(["jquery","mustache","layer","underscore","campaign-code-generate"],function($,n,a,o,r){"use strict";var i={},e={data:{AdviserInfoDto:null},loadCss:function(e){var t=document.createElement("link");t.setAttribute("rel","stylesheet"),t.setAttribute("type","text/css"),t.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(t)},request:{getJson:function(e,t,n){$.ajax({async:!0,url:e.url+(-1<e.url.indexOf("?")?"&t=":"?t=")+(new Date).getTime(),type:"GET",data:e.data,success:function(e){e.message&&n?n(e):t&&t(e)},error:function(e){n&&n(e)}})},getCrossJson:function(e,t){$.ajax({async:!0,url:e.url,type:"GET",dataType:"jsonp",jsonp:e.callbackType||"callback",data:e.data,success:function(e){t&&t(e)},error:function(e){}})},postData:function(e,t){$.ajax({type:e.method||"POST",url:e.url,data:JSON.stringify(e.data)||"{}",success:function(e){e.result?t&&t(e):a.msg(e.message)}})},postData2:function(n,o,r){var e={url:n.url,async:!1!==n.async,cache:!1,success:function(e){var t=e.result||{};if(e.status&&"00000"!=e.status){if(!e.message&&!t.noticeMsg||n.noToast||a.msg(e.message||t.noticeMsg),r&&"function"==typeof r)return r(e)}else o&&"function"==typeof o&&o(e)},error:function(){r&&"function"==typeof r&&r.apply(null,arguments)}};e.type=(n.method||"POST").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type||(e.dataType="json",e.data={data:JSON.stringify(n.data)||"{}"}),$.ajax(e)},postData3:function(e,t,n){$.ajax({type:e.method||"POST",url:e.url,async:!1!==e.async,dataType:"json",data:{data:e.data||"{}"},success:function(e){if(e.message)return n&&"function"==typeof n?void n(e):void a.msg(e.message);t&&"00000"===e.status&&t(e)},error:function(){n&&"function"==typeof n&&n.apply(null,arguments)}})}},cookie:{delCookie:function(e){var t=new Date;t.setTime(t.getTime()-1e4),document.cookie=e+"=a; expires="+t.toGMTString()},setCookie:function(e,t,n,o){var r=new Date;if(t=encodeURIComponent(t),n){r.setTime(r.getTime()+(n||0));var a="expires="+r.toUTCString()}if(o)o="domain="+o;document.cookie=e+"="+t+"; "+a+"; "+o+";Path=/"},getCookie:function(e,t){var n,o=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(n=document.cookie.match(o))?t?n[2]:decodeURIComponent(n[2]):""}},checkName:function(e){return new RegExp("^[\\sA-Za-z_\\u4e00-\\u9fa5䶮]{2,50}$").test(e)},CheckMobile:function(e){return!!new RegExp("^1[0-9]{10}$").test(e)},checkCardIdentity:function(e){var t,n=$.trim(e),o=new Array;return o=n.split(""),!!n&&("111111111111111"!=n&&(!!(parseInt(n.substr(6,4))%4==0||parseInt(n.substr(6,4))%100==0&&parseInt(n.substr(6,4))%4==0?/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}[0-9Xx]$/:/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|1[0-9]|2[0-8]))[0-9]{3}[0-9Xx]$/).test(n)&&(t=7*(parseInt(o[0])+parseInt(o[10]))+9*(parseInt(o[1])+parseInt(o[11]))+10*(parseInt(o[2])+parseInt(o[12]))+5*(parseInt(o[3])+parseInt(o[13]))+8*(parseInt(o[4])+parseInt(o[14]))+4*(parseInt(o[5])+parseInt(o[15]))+2*(parseInt(o[6])+parseInt(o[16]))+1*parseInt(o[7])+6*parseInt(o[8])+3*parseInt(o[9]),"F","10X98765432".substr(t%11,1)==o[17].toUpperCase())))},dateHelper:{formatDate:function(e,t){if(!t)return"";"number"==typeof t&&(t=new Date(1e3*t));var n={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds(),w:"日一二三四五六".charAt(t.getDay())};for(var o in e=e.replace(/y{4}/,t.getFullYear()).replace(/y{2}/,t.getFullYear().toString().substring(2)),n){var r=new RegExp(o);e=e.replace(r,a)}function a(e){return 1===e.length?n[o]:("00"+n[o]).substr((""+n[o]).length)}return e},getDatefromText:function(e){return e.split("T")[0]}},tips:{},text:{formatMoney:function(e){return(e/100).toFixed(2)}},state:{checkLogin:function(t){e.request.getJson({url:"/api/users/islogin"},function(e){t(e)})}},page:{openNewTag:function(e){var t=document.createElement("a");document.body.appendChild(t),t.href=e,t.target="_blank",t.click(),document.body.removeChild(t)},showSingleBtn:function(e,t,n){a.confirm(e,{btn:[n||"我知道了"],closeBtn:1,area:["530px"]},function(){t?t():a.closeAll()}),$(".layui-layer-btn0").removeClass("layui-layer-btn0").addClass("layui-layer-btn1")}},url:{getUrlVar:function(e){return function(){for(var e,t=[],n=location.search.slice(1).split("&"),o=0;o<n.length;o++)e=n[o].split("="),t.push(e[0]),t[e[0]]=e[1];return t}()[e]||""}},utils:{marginProtectList:function(e){var t={};return $(e).each(function(e){t[this.name]?this.name="":t[this.name]=!0}),e},bindFocusOut:function(n){var e,o=this,r=n.element,a=$(r)[0];null!==a.getAttribute("bind-focusout")&&this.unBindFocusOut(n),a.setAttribute("bind-focusout",""),e=a.__focusout_handler__=function(e){var t=e.target;a===t||$.contains(a,t)||(n.persistent||o.unBindFocusOut({element:r}),n.callback.call(n,e))},top.$(document).on("click",e)},unBindFocusOut:function(e){var t=e.element,n=$(t)[0];top.$(document).off("click",n.__focusout_handler__),n.removeAttribute("bind-focusout")},template:function(e){var t=i[e];return t||(t=$(e).html(),i[e]=t,$(e).remove()),function(e){return n.render(t,e)}},_template:function(e,t){return o.template(e,t)},stopEvent:function(e){var t=e||window.event;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},getTarget:function(e){return(e=e||window.event).target||e.srcElement},getQueryString:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?unescape(n[2]):null},getQueryStringFromHash:function(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n="",o=window.location.hash.indexOf("?");-1<o&&(n=window.location.hash.slice(o));var r=n.substr(1).match(t);return null!=r?unescape(r[2]):null},endTime:function(e,t,n,o){var r=(t-e)/1e3|0,a=0,i=0,s=setInterval(function(){for(;-1<r;)return a=Math.floor(r/3600),i=Math.floor((r-3600*a)/60),n(a<10?"0"+a:a,i<10?"0"+i:i,r),void r--;clearTimeout(s),s=null,o()},1e3)}},timer:function(e){var t,n=e||{},o=n.time||3,r="string"==typeof n.id?document.getElementById(n.id):n.id,a=n.callback||function(){},i=function(){t=setTimeout(i,1e3),r.innerHTML=o,--o<0&&(clearTimeout(t),a())};i()},rightAdvisor:function(){var e=[];e.push('<div class="hz-advisor" style="position:fixed;top:50%;margin-top: -33.5px;right:0;width:72px;height:67px;font-size:16px;color:#fff;text-align:center;cursor: pointer;z-index:10000;line-height:1.2;padding-top:5px;background:url(//img.huizecdn.com/hz/www/page/advisor-bg.png) repeat">'),e.push('<i class="iconfont f30">&#xe729;</i>'),e.push("<p>客服</p>"),e.push("</div>"),$("body").append(e.join("")),$(".hz-advisor").on("click",function(){var e="//is.huize.com/api/users/kefuRewrite?referrer="+encodeURIComponent(window.location.href)+"&title="+encodeURIComponent(document.title)+"&reWriteType=1";window.open(e,"kefu","toolbar=no,location=no,directories=no,resizable=yes,status=yes,menubar=no,scrollbars=yes,width=800,height=600,left=0,top=0")})},jointReferrer:function(e){var t=window.location.href.replace(/campaign_code=([\s\S]+?)(&|$)/g,""),n="campaign_code="+r.getCode({ignore:"zaixian",special:e});if(-1===t.indexOf("?"))return t+"?"+n;var o=t.substr(t.length-1,1);return"?"===o||"&"===o?t+n:t+"&"+n}};return e});