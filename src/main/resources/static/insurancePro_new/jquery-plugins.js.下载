define(["jquery"],function($){$.fn.myForm=function(t){var i=$.fn.extend({checkedClass:"hz-check-item-checked",checked:function(){}},t);return this.each(function(){var e=$(this),a=e.attr("rel")||"",n=e.attr("for")||"";function t(){var t;if(i.ableSelected&&"function"==typeof i.ableSelected&&!i.ableSelected.call(e))return!1;"checkbox"===a?$(this).toggleClass(i.checkedClass):"radio"===a&&($(this).addClass(i.checkedClass),n&&$('[for="'+n+'"]').removeClass(i.checkedClass)),t=!!$(this).hasClass(i.checkedClass),i.checked.call(e,t,a)}a=a.toLowerCase(),a=$.trim(a),n=$.trim(n),e.data("lock")||(e.data("lock",!0),e.on("click",t),e.on("checked",t),e.on("change",t))})},$.fn.dropDown=function(t){var u=$.fn.extend({eventType:"click",type:0,width:"",time:100,height:"",listWidth:"auto",top:function(){return 0},event:function(){},enter:function(){},leave:function(){},select:function(){}},t);return $dropDownSelectArea=$("#dropDownSelectArea"),$("#dropDownSelectArea").length||($("body").append('<div id="dropDownSelectArea"></div>'),$dropDownSelectArea=$("#dropDownSelectArea")),this.each(function(){var e,a=this,i=$(this),c=(i.attr("rel"),i.data("dropdown")),o=(u.height||i.data("height"),u.zIndex||i.data("zindex")),d=i.data("show"),l=(i.outerWidth(),i.outerHeight()),s=$('[data-dropdown-item="'+c+'"]'),r=function(t){e=setTimeout(function(){var t=$('[data-dropdown-item="'+c+'"]:visible');t.hide(),u.leave(i,t),$dropDownSelectArea.html(""),t.length||(t.hide(),$(document).data("lock-dropdown_"+c,""),$(document).off("click",r))},!0===t?1:u.time)};$(this).data("lock")||($(this).data("lock",!0),$("[data-dropdown-item]").hide().on("click"),i.on("mouseleave",function(){"mouseenter"===u.eventType&&(clearTimeout(e),r())}).on(u.eventType,function(t){var e="function"==typeof u.top?u.top():u.top;if(!i.hasClass("disabled")){var a=$('[data-dropdown-item="'+c+'"]');if($(".hz-dropdown").css("zIndex",1e3),"none"===a.css("display")&&a.parent().css("zIndex",1001),pos=i.offset(),s.css({position:"absolute",height:u.height,"overflow-y":"auto","z-index":o}),u.width&&s.css({width:u.width}),u.type||s.css({left:pos.left,top:pos.top+l,"z-index":o}),u.enter(i,s),$("[data-dropdown-item]").each(function(t,e){$(this).attr("data-dropdown-item")!==c&&$(this).hide()}),"body"===d){var n=i.offset();$dropDownSelectArea.html(s.clone(!0)),$dropDownSelectArea.css({position:"absolute",left:n.left,top:n.top+e+i.height()}),$dropDownSelectArea.children().show()}else $('[data-dropdown-item="'+c+'"]').toggle();$(document).data("lock-dropdown_"+c)||($(document).data("lock-dropdown_"+c,!0),$(document).on("click",function(t){u.event(t)&&r()}))}}),s.on("mouseenter",function(){clearTimeout(e)}).on("mouseleave",function(){"mouseenter"===u.eventType&&r()}).on("click",function(t){!0===u.select.call(a,t)?r(!0):t.stopPropagation()}),$(this).attr("isDropDown",!0),$dropDownSelectArea.css({width:i.data("width")||u.listWidth}))})},$.fn.enterOnlyNumber=function(t){$.fn.extend({},t);return this.each(function(){$(this).data("lock")||($(this).data("lock",!0),$(this).keydown(function(t){!function(t){var e=$(this),a=t.which,n=(e.data("max"),e.data("min"),96<=a&&a<=105),i=48<=a&&a<=57;$.inArray(a,[8,9,27,37,38,39,40,13])<0&&!n&&!i&&t.preventDefault()}(t)}))})},$.fn.eidtNumber=function(t){var u=$.fn.extend({callback:function(){}},t);return this.each(function(){var a=this,n=$(this),e=n.find("span").eq(1),i=n.find("input"),c=n.find("span").eq(0),o=n.data("min")||0,d=n.data("max")||Infinity,t=n.data("default")||"",l=n.data("lock"),s=i.val();if(!l){n.on("reset",function(){var t=i.val();t<=o?c.addClass("disabled"):c.removeClass("disabled"),d<=t?e.addClass("disabled"):e.removeClass("disabled")}),n.trigger("reset"),n.data("lock",!0),$.isNumeric(t)&&i.val(t),s&&(d<s||s<o)&&i.val(""),e.on("click",function(){var t,e=i.val();s=i.val(),$(this).hasClass("disabled")||(s++,d&&s<=d&&i.val(s),n.trigger("reset"),t=i.val(),u.callback.call(a,e,t,i))}),c.on("click",function(){var t,e=i.val();s=i.val(),$(this).hasClass("disabled")||(o<=--s&&i.val(s),n.trigger("reset"),t=i.val(),u.callback.call(a,e,t,i))}),i.blur(function(){var t=$(this).val();t&&(t<o&&$(this).val(o),d<t&&$(this).val(d)),n.trigger("reset"),u.callback.call(a,t,i.val(),i)});try{i.enterOnlyNumber()}catch(r){}}})},$.fn.selectBox=function(t){var n=$.extend({},{data:[],model:1,cls:"",itemCls:"hz-radio-item inline-block",imgCls:"",iconCls:"",textCls:"",selectedClass:"hz-radio-item-checked",defaultSelected:0,onSelect:function(){}},t);if(0===n.data.length||0===$(this).length)return null;var i=$(this).addClass(n.cls+" "+(1===n.model?"com-radio-list":"com-checkbox-list"));function c(t){var e;this.data("selected",!0).addClass(n.selectedClass),1===n.model?(this.data("selected",!1).siblings(".com-selectbox-item").removeClass(n.selectedClass),t.text?i.data("selectData",{value:t.value,text:t.text}):i.data("selectData",t.value)):(e=i.data("selectData")||[],t.text?e[e.length]={value:t.value,text:t.text}:e[e.length]=t.value,i.data("selectData",e))}return i.each(function(){var a=$(document.createDocumentFragment());$.each(n.data,function(t,e){e.value=e.value||t,$("<div class='com-selectbox-item'></div>").addClass(n.itemCls).attr("data-value",e.vaule).append(function(){var t="";return t+="<i class='"+n.iconCls+"'></i>",e.img&&(t+="<img class='"+n.imgCls+"' src='"+e.img+"' width='"+n.imgWidth+"' height='"+n.imgHeight+"' alt='"+(e.alt||"")+"'>"),e.text&&(t+="<span class='"+n.textCls+"'> "+e.text+" </span>"),t}).bind("click",function(){c.call($(this),e),n.onSelect.call($(this),$(this))}).appendTo(a)}),a.appendTo(i),$.each(n.data,function(t,e){if(e.value===n.defaultSelected||e.value===undefined&&t===n.defaultSelected)return e.value=e.value||n.defaultSelected,void c.call(i.find(".com-selectbox-item").eq(n.defaultSelected),e)})}),i.item=function(t,e){return e.call(i.find(".com-selectbox-item").eq(t||-1)),i},i.getData=function(){return $(this).data("selectData")},i},$.fn.autoComplete=function(t){var o,d=$(this);return 0===(o=$.extend({},{data:[],input:"",submit:"",onSelect:function(){},onSubmit:function(t){}},t)).data.length||0===$(this).length||0===$(this).find(o.input).length?this:d.each(function(){$(this).find(o.input).bind("keyup",function(t){var a=$(this);value=a.val(),function e(a,n,i){var c;return function(){var t=this,e=arguments;i&&!c&&a.apply(t,e),clearTimeout(c),c=setTimeout(function(){c=null,i||a.apply(t,e)},n)}}(function(){38!==t.keyCode&&40!==t.keyCode?13!==t.keyCode?function e(t){var a=d.find(o.input);d.find(".com-autoComplete-box").remove();var n=$("<div class='com-autoComplete-box'></div>").css({position:"absolute",border:"1px solid #eee",marginTop:"-1px",borderTop:"none",backgroundColor:"#fff",width:parseInt(a.width())+2*parseInt(a.css("padding-left"))+"px"});if(""===t)return;$.each(o.data,function(e){-1<o.data[e].text.indexOf(t)&&$("<div class='autoComplete-matched-item'></div>").css({padding:"6px 5px",cursor:"pointer"}).attr("data-value",o.data[e].value).bind("mouseover",function(){$(this).css("background-color","#efefef").addClass("complete-item-current")}).bind("mouseleave",function(){$(this).css("background-color","#fff").removeClass("complete-item-current")}).bind("click",function(){var t=$(this).text();n.remove(),o.onSelect.call($(this),i(o.data,t)),d.data("autoCompleteData",i(o.data,t)),a.val(o.data[e].text)}).append($("<p></p>").text(o.data[e].text)).appendTo(n)}),n.appendTo(d)}(value):n(a,o.onSubmit):function c(t){var e,a=38===t,n=d.find(".autoComplete-matched-item"),i=d.find(".complete-item-current");if(0===n.length)return;a?(i.removeClass("complete-item-current").data("select",!1),0===i.index()?(e=n.length-1,n.eq(e).addClass("complete-item-current").data("select",!0)):(e=0===i.length?1:i.index(),n.eq(e-1).addClass("complete-item-current").data("select",!0))):(i.removeClass("complete-item-current").data("select",!1),i.index()===n.length-1?(e=0,n.eq(e).addClass("complete-item-current").data("select",!0)):(e=0===i.length?-1:i.index(),n.eq(e+1).addClass("complete-item-current").data("select",!0)));d.data("autoCompleteData",o.data[e])}(t.keyCode)},10)()}),$(this).find(o.submit).bind("click",function(){n($(this),o.onSubmit)})});function i(t,e){for(var a in t)if(t[a].text===e)return t[a]}function n(t,e){var a=d.data("autoCompleteData");if(0===d.find(".complete-item-current").length)0<d.find(".com-autoComplete-box").length&&(a={}),e.call(t,a);else{var n=d.find(".complete-item-current").text();d.find(o.input).val(d.find(".complete-item-current").text()),d.data("autoCompleteData",i(o.data,n)),d.find(".com-autoComplete-box").remove()}}},$.extend($.fn,{verify:function(t){var o;o=$.extend({},{submit:"input[type='submit']",onSubmit:function(){},actions:{},blurTrigger:!0,errorAction:""},t);var d={required:/^[^\r\n]+$/,number:/[^\d]/g,email:/^([a-zA-z\d]+)@([a-zA-z\d]+)\.(([a-zA-z\d]+))]$/,phone:/^0\d{2,4}-?\d{7,8}]$/,tel:/^(\+86)?(\d{8}|\d{11})$/},e=$(this),l=function(t){return new Function("return "+t+";")};function s(t,e){var a,n,i=o.actions,c=t.data("errorMessage")||{};a=$(this).attr("class")===undefined?"":l(($(this).attr("class").match(/{[-_a-zA-Z\d"',:]+\}/)||[])[0]||"{}")(),n=i[$(this).attr("name")||$(this).children("input[type='radio'],input[type='checkbox']").attr("name")],e?($(this).data("valid",!0),a.success&&!$(this).hasClass(a.success)&&$(this).addClass(a.success),!$.isEmptyObject(n)&&$.isFunction(n.success)&&n.success.call($(this)),delete c[$(this).attr("name")]):($(this).data("valid",!1),$(this).attr("name")!==undefined&&(c[$(this).attr("name")]=$(this).attr("msg")||""),a.success&&!$(this).hasClass(a.failed)&&$(this).addClass(a.failed),!$.isEmptyObject(n)&&$.isFunction(n.failed)&&n.failed.call($(this))),t.data("errorMessage",c)}function i(t){var e=$(this),a=e.attr("verify"),n=(e.attr("type"),$.trim(e.val()||"")),i=e.attr("maxLength"),c=e.attr("minLength");/^\/(\n|.)+\/$/.test(a)&&(d[a]=new RegExp(a.substr(1,a.length-2))),d[a]!==undefined&&s.call($(this),t,d[a].test(n)&&(c===undefined||c<=(e.val()||"").length)&&(i===undefined||i>=(e.val()||"").length))}return e.data("valid",!0),e.each(function(t){var c=$(this),e=c.find("[verify]");c.find(o.submit).bind("click",function(){var a={},n={};c.find("input[verify],select[verify],textarea[verify]").each(function(){var t=$(this)[0].tagName.toLowerCase(),e=$(this).attr("type")||$(this).find("input").attr("type");"text"===e||"password"===e||"email"===e||"textarea"===t?i.call($(this),c):"input"!==t&&"input"!==t&&"radio"===e?(c.find("input[type='radio']").each(function(){a[$(this).attr("name")]=!1}),c.find("input[type = 'radio']").each(function(){$(this).attr("checked")!==undefined&&"false"!==$(this).attr("checked")&&(a[$(this).attr("name")]=!0)}),$.each(a,function(t,e){var a=$("input[name='"+t+"']");s.call(a.parent(),c,e)})):"input"!==t&&"input"!==t&&"checkbox"===e?(c.find("input[type = 'checkbox']").each(function(){n[$(this).attr("name")]=0}),c.find("input[type = 'checkbox']").each(function(){$(this).attr("checked")!==undefined&&"false"!==$(this).attr("checked")&&n[$(this).attr("name")]++}),$.each(n,function(t,e){var a=$("input[name='"+t+"']"),n=a.parent().attr("minLength"),i=a.parent().attr("maxLength");s.call(a.parent(),c,0<e&&(n===undefined||e<n)&&(i===undefined||e<i))})):"select"===t&&s.call($(this),c,"请选择"!==$(this).find("option:selected").val())}),c.data("valid",$.isEmptyObject(c.data("errorMessage"))),o.onSubmit.call(c)}),e.each(function(){var t=$(this)[0].tagName.toLowerCase(),e=$(this).attr("type");("input"!==t||"text"!==e&&"password"!==e&&"email"!==e)&&"textarea"!==t||o.blurTrigger&&$(this).blur(function(){i.call($(this),c),"function"==typeof o.errorAction&&o.errorAction.call($(this),c)})})})},valid:function(){if($(this)[0])return $(this).data("valid")},getError:function(){if($(this)[0])return $(this).data("errorMessage")||{}}})});